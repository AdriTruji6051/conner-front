<div class="main-container">
    <!-- UTILITIES PANEL -->
    <div class="row p-2 m-2 utilities">
        <div class="col-lg-6">
            <input type="text" id="search-input" class="search-input" [(ngModel)]="inputSearch" (keyup.enter)="searchProduct()" autocomplete="off" placeholder="Busca el producto o escribe su c贸digo" aria-label="Escribe el nombre del producto o escribe su c贸digo para buscar">
            <svg class="svg-color svg-input-search" xmlns="http://www.w3.org/2000/svg" (click)="searchProduct()" viewBox="0 -960 960 960"><path d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z"/>
            </svg>
        </div>
        <div class="d-flex flex-row justify-content-center gap-3 p-1 col-lg-6" style="height: 50px;">
            <button class="pdv-btn" (click)="wholesale()"> {{ wholesaleBtnText }} </button>
            <button class="pdv-btn" (click)="removeProduct()"> {{ deleteProdBtnText }} </button>
            <button class="pdv-btn" (click)="newCommonProduct()"> {{ commontArtBtnText }} </button>
        </div>
    </div>
    <!-- END UTILITES PANEL -->

    <!-- TABLE FOR BILL -->
    <div class="table-container m-1">
        <section class="example-container mat-elevation-z8" tabindex="0">
            <table mat-table [dataSource]="dataSource">
          
              <!-- Position Column -->
              <ng-container matColumnDef="code">
                <th mat-header-cell *matHeaderCellDef> C贸digo</th>
                <td mat-cell *matCellDef="let product"> {{product.code}} </td>
              </ng-container>
          
              <!-- Name Column -->
              <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef> Descripci贸n </th>
                <td mat-cell *matCellDef="let product"> {{product.description}} </td>
              </ng-container>
          
              <!-- Weight Column -->
              <ng-container matColumnDef="salePrice">
                <th mat-header-cell *matHeaderCellDef> Precio </th>
                <td mat-cell *matCellDef="let product"> {{product.salePrice}} </td>
              </ng-container>
          
              <!-- Symbol Column -->
              <ng-container matColumnDef="wholeSalePrice">
                <th mat-header-cell *matHeaderCellDef> Mayoreo </th>
                <td mat-cell *matCellDef="let product"> {{product.wholesalePrice != product.salePrice ? product.wholesalePrice: ''}} </td>
              </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="cantity">
                    <th mat-header-cell *matHeaderCellDef> Cantidad </th>
                    <td mat-cell *matCellDef="let product"> {{product.cantity}} </td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="import">
                    <th mat-header-cell *matHeaderCellDef> Importe </th>
                    <td mat-cell *matCellDef="let product"> {{product.import}} </td>
                </ng-container>
          
              <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
              <tr 
                mat-row
                (click)="selectProduct(row)"
                [class.wholesale-row]="activeTicket?.products.wholesale"
                [class.selected-row]="row.code == productRow?.code"
                *matRowDef="let row; columns: displayedColumns;"
                ></tr>
            </table>
          </section>

    </div>
    <!-- END TABLE FOR BILL -->

    <!-- CONTROL PANEL FOR CHECKING -->
    <div class="control-panel row">
        <div class="d-flex flex-row-reverse p-4 control-panel-utils">
            <div class="total-sale col-lg-3 col-8 util">
                <p class="fs-1 m-3">Total: <b>{{ total }}</b></p>
            </div>
            <div class="collect-bill col-lg-2 col-4 util">
                <button class="pdv-btn collect-bill-btn">{{ collectBtnText}}</button>
            </div>
        </div>
    </div>
</div>

